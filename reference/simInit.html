<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Initialize a new simulation — simInit • SpaDES.core</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Initialize a new simulation — simInit"><meta property="og:description" content='Create a new simulation object, the "sim" object. This object is implemented
using an environment where all objects and functions are placed.
Since environments in R are pass by reference, "putting" objects in
the sim object does no actual copy.
The simList also stores all parameters, and other important simulation
information, such as times, paths, modules, and module load order.
See more details below.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-6"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-6');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SpaDES.core</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/i-introduction.html">01 Introduction to `SpaDES`</a>
    </li>
    <li>
      <a href="../articles/ii-modules.html">02 Building `SpaDES` modules</a>
    </li>
    <li>
      <a href="../articles/iii-cache.html">03 Caching `SpaDES` simulations</a>
    </li>
    <li>
      <a href="../articles/iv-advanced.html">04 Advanced `SpaDES` use</a>
    </li>
    <li>
      <a href="../articles/v-automated-testing.html">05 Automated module testing</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/SpaDES.core/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Initialize a new simulation</h1>
    <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/SpaDES.core/blob/HEAD/R/simulation-simInit.R" class="external-link"><code>R/simulation-simInit.R</code></a></small>
    <div class="hidden name"><code>simInit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a new simulation object, the "sim" object. This object is implemented
using an <code>environment</code> where all objects and functions are placed.
Since environments in <code>R</code> are pass by reference, "putting" objects in
the sim object does no actual copy.
The <code>simList</code> also stores all parameters, and other important simulation
information, such as times, paths, modules, and module load order.
See more details below.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simInit</span><span class="op">(</span></span>
<span>  <span class="va">times</span>,</span>
<span>  <span class="va">params</span>,</span>
<span>  <span class="va">modules</span>,</span>
<span>  <span class="va">objects</span>,</span>
<span>  <span class="va">paths</span>,</span>
<span>  <span class="va">inputs</span>,</span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">loadOrder</span>,</span>
<span>  notOlderThan <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for list,list,list,list,list,data.frame,data.frame,character</span></span>
<span><span class="fu">simInit</span><span class="op">(</span></span>
<span>  <span class="va">times</span>,</span>
<span>  <span class="va">params</span>,</span>
<span>  <span class="va">modules</span>,</span>
<span>  <span class="va">objects</span>,</span>
<span>  <span class="va">paths</span>,</span>
<span>  <span class="va">inputs</span>,</span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">loadOrder</span>,</span>
<span>  notOlderThan <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ANY,ANY,ANY,character,ANY,ANY,ANY,ANY</span></span>
<span><span class="fu">simInit</span><span class="op">(</span></span>
<span>  <span class="va">times</span>,</span>
<span>  <span class="va">params</span>,</span>
<span>  <span class="va">modules</span>,</span>
<span>  <span class="va">objects</span>,</span>
<span>  <span class="va">paths</span>,</span>
<span>  <span class="va">inputs</span>,</span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">loadOrder</span>,</span>
<span>  notOlderThan <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ANY,ANY,character,ANY,ANY,ANY,ANY,ANY</span></span>
<span><span class="fu">simInit</span><span class="op">(</span></span>
<span>  <span class="va">times</span>,</span>
<span>  <span class="va">params</span>,</span>
<span>  <span class="va">modules</span>,</span>
<span>  <span class="va">objects</span>,</span>
<span>  <span class="va">paths</span>,</span>
<span>  <span class="va">inputs</span>,</span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">loadOrder</span>,</span>
<span>  notOlderThan <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ANY,ANY,ANY,ANY,ANY,ANY,ANY,ANY</span></span>
<span><span class="fu">simInit</span><span class="op">(</span></span>
<span>  <span class="va">times</span>,</span>
<span>  <span class="va">params</span>,</span>
<span>  <span class="va">modules</span>,</span>
<span>  <span class="va">objects</span>,</span>
<span>  <span class="va">paths</span>,</span>
<span>  <span class="va">inputs</span>,</span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">loadOrder</span>,</span>
<span>  notOlderThan <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">simInitDefaults</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>times</dt>
<dd><p>A named list of numeric simulation start and end times
(e.g., <code>times = list(start = 0.0, end = 10.0, timeunit = "year")</code>),
with the final optional element, <code>timeunit</code>, overriding the default
time unit used in the simulation which is the "smallest time unit" across all
modules. See examples.</p></dd>


<dt>params</dt>
<dd><p>A list of lists of the form <code>list(moduleName=list(param1=value, param2=value))</code>.
See details.</p></dd>


<dt>modules</dt>
<dd><p>A named list of character strings specifying the names of modules to be loaded
for the simulation.
Note: the module name should correspond to the R source file from which the module is loaded.
Example: a module named "caribou" will be sourced form the file <code class="file">caribou.R</code>,
located at the specified <code>modulePath(simList)</code> (see below).</p></dd>


<dt>objects</dt>
<dd><p>(optional) A vector of object names (naming objects
that are in the calling environment of
the <code>simInit</code>, which is often the
<code>.GlobalEnv</code> unless used programmatically.
NOTE: this mechanism will
fail if object name is in a package dependency), or
a named list of data objects to be
passed into the <code>simList</code> (more reliable).
These objects will be accessible
from the <code>simList</code> as a normal list, e.g,. <code>mySim$obj</code>.</p></dd>


<dt>paths</dt>
<dd><p>An optional named list with up to 4 named elements,
<code>modulePath</code>, <code>inputPath</code>, <code>outputPath</code>, and <code>cachePath</code>.
See details. NOTE: Experimental feature now allows for multiple <code>modulePath</code>s
to be specified in a character vector. The modules will be searched for sequentially
in the first <code>modulePath</code>, then if it doesn't find it, in the second etc.</p></dd>


<dt>inputs</dt>
<dd><p>A <code>data.frame</code>. Can specify from 1 to 6
columns with following column names: <code>objectName</code> (character, required),
<code>file</code> (character), <code>fun</code> (character), <code>package</code> (character),
<code>interval</code> (numeric), <code>loadTime</code> (numeric).
See <code><a href="simList-accessors-inputs.html">inputs()</a></code> and vignette("ii-modules") section about inputs.</p></dd>


<dt>outputs</dt>
<dd><p>A <code>data.frame</code>. Can specify from 1 to 5
columns with following column names: <code>objectName</code> (character, required),
<code>file</code> (character), <code>fun</code> (character), <code>package</code> (character),
<code>saveTime</code> (numeric) and <code>eventPriority</code> (numeric). If
<code>eventPriority</code> is not set, it defaults to <code><a href="priority.html">.last()</a></code>. If <code>eventPriority</code>
is set to a low value, e.g., 0, 1, 2 and <code>saveTime</code> is <code>start(sim)</code>,
it should give "initial conditions".</p>
<p>See <code><a href="simList-accessors-outputs.html">outputs()</a></code> and
<code><a href="../articles/ii-modules.html">vignette("ii-modules")</a></code> section about outputs.</p></dd>


<dt>loadOrder</dt>
<dd><p>An optional character vector of module names specifying the order in
which to load the modules. If not specified, the module
load order will be determined automatically.</p></dd>


<dt>notOlderThan</dt>
<dd><p>A time, as in from <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time()</a></code>. This is passed into
the <code>Cache</code> function that wraps <code>.inputObjects</code>.
If the module uses the <code>.useCache</code> parameter and it is
set to <code>TRUE</code> or <code>".inputObjects"</code>,
then the <code>.inputObjects</code> will be cached.
Setting <code>notOlderThan = Sys.time()</code> will cause the
cached versions of <code>.inputObjects</code> to be refreshed,
i.e., rerun.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>simList</code> simulation object, pre-initialized from values
specified in the arguments supplied.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<div class="section">
<h3 id="calling-this-siminit-function-does-the-following-">Calling this <code>simInit</code> function does the following:<a class="anchor" aria-label="anchor" href="#calling-this-siminit-function-does-the-following-"></a></h3>

<table class="table table"><tr><td><strong>What</strong></td><td><strong>Details</strong></td><td><strong>Argument(s) to use</strong></td></tr><tr><td>fills <code>simList</code> slots</td><td>places the arguments <code>times</code>,
<code>params</code>, <code>modules</code>, <code>paths</code> into equivalently named
<code>simList</code> slots</td><td><code>times</code>,
<code>params</code>, <code>modules</code>, <code>paths</code></td></tr><tr><td>sources all module files</td><td>places all function definitions in the
<code>simList</code>, specifically, into a sub-environment of the main
<code>simList</code> environment: e.g., <code>sim$&lt;moduleName&gt;$function1</code>
(see section on <strong>Scoping</strong>)</td><td><code>modules</code></td></tr><tr><td>copies objects</td><td>from the global environment to the
<code>simList</code> environment</td><td><code>objects</code></td></tr><tr><td>loads objects</td><td>from disk into the <code>simList</code></td><td><code>inputs</code></td></tr><tr><td>schedule object loading/copying</td><td>Objects can be loaded into the
<code>simList</code> at any time during a simulation</td><td><code>inputs</code></td></tr><tr><td>schedule object saving</td><td>Objects can be saved to disk at any arbitrary
time during the simulation. If specified here, this will be in addition
to any saving due code inside a module (i.e., a module may manually
run <code>write.table(...)</code></td><td><code>outputs</code></td></tr><tr><td>schedules "init" events</td><td>from all modules (see <code><a href="simList-accessors-events.html">events()</a></code>)</td><td>automatic</td></tr><tr><td>assesses module dependencies</td><td>via the inputs and outputs identified in their
metadata. This gives the order of the <code>.inputObjects</code> and <code>init</code>
events. This can be overridden by <code>loadOrder</code>.</td><td>automatic</td></tr><tr><td>determines time unit</td><td>takes time units of modules
and how they fit together</td><td><code>times</code> or automatic</td></tr><tr><td>runs <code>.inputObjects</code> functions</td><td>from every module
<em>in the module order as determined above</em></td><td>automatic</td></tr></table></div>

<p><code>params</code> can only contain updates to any parameters that are defined in
the metadata of modules. Take the example of a module named, <code>Fire</code>, which
has a parameter named <code>.plotInitialTime</code>. In the metadata of that module,
it says <code>TRUE</code>. Here we can override that default with:
<code>list(Fire=list(.plotInitialTime=NA))</code>, effectively turning off plotting.
Since this is a list of lists, one can override the module defaults for multiple
parameters from multiple modules all at once, with say:
<code>list(Fire = list(.plotInitialTime = NA, .plotInterval = 2), caribouModule = list(N = 1000))</code>.</p>
<p>The <code>params</code> list can contain a list (named <code>.globals</code>) of named objects
e.g., <code>.globals = list(climateURL = "https:\\something.com")</code> entry. Any and every
module that has a parameter with that name (in this case <code>climateURL</code>) will be
overridden with this value as passed.</p>
<p><code>params</code> can be used to set the seed for a specific event in a module. This
is done using the normal <code>params</code> argument, specifying <code>.seed</code> as a list
where the elements are a numeric for the seed and the name is the event. Since
parameters must be specific to a module, this creates a module and event specific
seed e.g., <code>params = list(moduleName = list(.seed = list(init = 123)))</code> will
set the <code>init</code> event of module named <code>moduleName</code> to 123. The RN stream
will be reset to its state prior to the <code>set.seed</code> call after the event.</p>
<p>We implement a discrete event simulation in a more modular fashion so it is
easier to add modules to the simulation. We use S4 classes and methods,
and fast lists to manage the event queue.</p>
<p><code>paths</code> specifies the location of the module source files,
the data input files, and the saving output files. If no paths are specified
the defaults are as follows:</p>
<ul><li><p><code>cachePath</code>: <code>getOption("reproducible.cachePath")</code>;</p></li>
<li><p><code>inputPath</code>: <code>getOption("spades.modulePath")</code>;</p></li>
<li><p><code>modulePath</code>: <code>getOption("spades.inputPath")</code>;</p></li>
<li><p><code>inputPath</code>: <code>getOption("spades.outputPath")</code>.</p></li>
</ul></div>
    <div id="note">
    <h2>Note</h2>
    <p>Since the objects in the <code>simList</code> are passed-by-reference, it is useful
to create a copy of the initialized <code>simList</code> object prior to running
the simulation (e.g., <code>mySimOut &lt;- spades(Copy(mySim))</code>).
This ensures you retain access to the original objects, which would otherwise
be overwritten/modified during the simulation.</p>
<p>The user can opt to run a simpler <code>simInit</code> call without inputs, outputs, and times.
These can be added later with the accessor methods (See example).
These are not required for initializing the simulation via <code>simInit</code>.
All of <code>modules</code>, <code>paths</code>, <code>params</code>, and <code>objects</code> are needed
for successful initialization.</p>
    </div>
    <div id="parsing-and-checking-code">
    <h2>Parsing and Checking Code</h2>
    


<p>The <code>simInit</code> function will attempt to find usage of <code>sim$xxx</code> or <code>sim[['xxx']]</code>
on either side of the assignment (<code>&lt;-</code>) operator.
It will compare these to the module metadata, specifically <code>inputObjects</code> for cases where
objects or "gotten" from the <code>simList</code> and <code>outputObjects</code> for cases where objects are
assigned to the <code>simList.</code></p>
<p>It will also attempt to find potential, common function name conflicts with things like
<code>scale</code> and <code>stack</code> (both in <span class="pkg">base</span> and <span class="pkg">raster</span>), and
<code>Plot</code> (in <span class="pkg">quickPlot</span> and some modules).</p>
<p><em>This code checking is young and may get false positives and false negatives,
i.e., miss things</em>.
It also takes computational time, which may be undesirable in operational code.
To turn off checking (i.e., if there are too many false positives and negatives), set
<code>options(spades.moduleCodeChecks = FALSE)</code>.</p>
    </div>
    <div id="caching">
    <h2>Caching</h2>
    


<p>Using caching with <code>SpaDES</code> is vital when building re-usable and reproducible content.
Please see the vignette dedicated to this topic.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Matloff, N. (2011). The Art of R Programming (ch. 7.8.3).
San Francisco, CA: No Starch Press, Inc..
Retrieved from <a href="https://nostarch.com/artofr.htm" class="external-link">https://nostarch.com/artofr.htm</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="spades.html">spades()</a></code>,
<code><a href="simList-accessors-times.html">times()</a></code>, <code><a href="params.html">params()</a></code>, <code><a href="objects.html">objs()</a></code>, <code><a href="simList-accessors-paths.html">paths()</a></code>,
<code><a href="simList-accessors-modules.html">modules()</a></code>, <code><a href="simList-accessors-inputs.html">inputs()</a></code>, <code><a href="simList-accessors-outputs.html">outputs()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Alex Chubaty and Eliot McIntire</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">mySim</span> <span class="op">&lt;-</span> <span class="fu">simInit</span><span class="op">(</span></span></span>
<span class="r-in"><span> times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0.0</span>, end <span class="op">=</span> <span class="fl">2.0</span>, timeunit <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   .globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stackName <span class="op">=</span> <span class="st">"landscape"</span>, burnStats <span class="op">=</span> <span class="st">"nPixelsBurned"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span>,</span></span>
<span class="r-in"><span> modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"randomLandscapes"</span>, <span class="st">"fireSpread"</span>, <span class="st">"caribouMovement"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sampleModules"</span>, package <span class="op">=</span> <span class="st">"SpaDES.core"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="spades.html">spades</a></span><span class="op">(</span><span class="va">mySim</span><span class="op">)</span> <span class="co"># shows plotting</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change more parameters, removing plotting</span></span></span>
<span class="r-in"><span><span class="va">mySim</span> <span class="op">&lt;-</span> <span class="fu">simInit</span><span class="op">(</span></span></span>
<span class="r-in"><span> times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0.0</span>, end <span class="op">=</span> <span class="fl">2.0</span>, timeunit <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   .globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stackName <span class="op">=</span> <span class="st">"landscape"</span>, burnStats <span class="op">=</span> <span class="st">"nPixelsBurned"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   fireSpread <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>.plotInitialTime <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span>,</span></span>
<span class="r-in"><span> modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"randomLandscapes"</span>, <span class="st">"fireSpread"</span>, <span class="st">"caribouMovement"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sampleModules"</span>, package <span class="op">=</span> <span class="st">"SpaDES.core"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outSim</span> <span class="op">&lt;-</span> <span class="fu"><a href="spades.html">spades</a></span><span class="op">(</span><span class="va">mySim</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A little more complicated with inputs and outputs</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="http://rgdal.r-forge.r-project.org" class="external-link">rgdal</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span> <span class="va">mapPath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"maps"</span>, package <span class="op">=</span> <span class="st">"quickPlot"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">mySim</span> <span class="op">&lt;-</span> <span class="fu">simInit</span><span class="op">(</span></span></span>
<span class="r-in"><span>   times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0.0</span>, end <span class="op">=</span> <span class="fl">2.0</span>, timeunit <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     .globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stackName <span class="op">=</span> <span class="st">"landscape"</span>, burnStats <span class="op">=</span> <span class="st">"nPixelsBurned"</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span>,</span></span>
<span class="r-in"><span>   modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"randomLandscapes"</span>, <span class="st">"fireSpread"</span>, <span class="st">"caribouMovement"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sampleModules"</span>, package <span class="op">=</span> <span class="st">"SpaDES.core"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">mapPath</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">"tif"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     functions <span class="op">=</span> <span class="st">"raster"</span>,</span></span>
<span class="r-in"><span>     package <span class="op">=</span> <span class="st">"raster"</span>,</span></span>
<span class="r-in"><span>     loadTime <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>     stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   outputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>objectName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"caribou"</span>,<span class="st">"landscape"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     saveTime <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>     stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># Use accessors for inputs, outputs</span></span></span>
<span class="r-in"><span> <span class="va">mySim2</span> <span class="op">&lt;-</span> <span class="fu">simInit</span><span class="op">(</span></span></span>
<span class="r-in"><span>   times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>current <span class="op">=</span> <span class="fl">0</span>, start <span class="op">=</span> <span class="fl">0.0</span>, end <span class="op">=</span> <span class="fl">2.0</span>, timeunit <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"randomLandscapes"</span>, <span class="st">"fireSpread"</span>, <span class="st">"caribouMovement"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>.globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stackName <span class="op">=</span> <span class="st">"landscape"</span>, burnStats <span class="op">=</span> <span class="st">"nPixelsBurned"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     modulePath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sampleModules"</span>, package <span class="op">=</span> <span class="st">"SpaDES.core"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># add by accessor is equivalent</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="simList-accessors-inputs.html">inputs</a></span><span class="op">(</span><span class="va">mySim2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">mapPath</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">"tif"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     functions <span class="op">=</span> <span class="st">"raster"</span>,</span></span>
<span class="r-in"><span>     package <span class="op">=</span> <span class="st">"raster"</span>,</span></span>
<span class="r-in"><span>     loadTime <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>     stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="simList-accessors-outputs.html">outputs</a></span><span class="op">(</span><span class="va">mySim2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>objectName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"caribou"</span>, <span class="st">"landscape"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     saveTime <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>     stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">mySim</span>, <span class="va">mySim2</span><span class="op">)</span> <span class="co"># TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># Use accessors for times -- does not work as desired because times are</span></span></span>
<span class="r-in"><span> <span class="co">#   adjusted to the input timeunit during simInit</span></span></span>
<span class="r-in"><span> <span class="va">mySim2</span> <span class="op">&lt;-</span> <span class="fu">simInit</span><span class="op">(</span></span></span>
<span class="r-in"><span>   params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     .globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stackName <span class="op">=</span> <span class="st">"landscape"</span>, burnStats <span class="op">=</span> <span class="st">"nPixelsBurned"</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span>,</span></span>
<span class="r-in"><span>   modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"randomLandscapes"</span>, <span class="st">"fireSpread"</span>, <span class="st">"caribouMovement"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sampleModules"</span>, package <span class="op">=</span> <span class="st">"SpaDES.core"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">mapPath</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">"tif"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     functions <span class="op">=</span> <span class="st">"raster"</span>,</span></span>
<span class="r-in"><span>     package <span class="op">=</span> <span class="st">"raster"</span>,</span></span>
<span class="r-in"><span>     loadTime <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>     stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   outputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>objectName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"caribou"</span>,<span class="st">"landscape"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     saveTime <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>     eventPriority <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">)</span>, <span class="co"># eventPriority 0 may give "initial" conditions</span></span></span>
<span class="r-in"><span>     stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># add times by accessor fails all.equal test because "year" was not</span></span></span>
<span class="r-in"><span> <span class="co">#   declared during module loading, so month became the default</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="simList-accessors-times.html">times</a></span><span class="op">(</span><span class="va">mySim2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>current <span class="op">=</span> <span class="fl">0</span>, start <span class="op">=</span> <span class="fl">0.0</span>, end <span class="op">=</span> <span class="fl">2.0</span>, timeunit <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">mySim</span>, <span class="va">mySim2</span><span class="op">)</span> <span class="co"># fails because time units are all different, so</span></span></span>
<span class="r-in"><span>                          <span class="co"># several parameters that have time units in</span></span></span>
<span class="r-in"><span>                          <span class="co"># "months" because they were loaded that way</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="params.html">params</a></span><span class="op">(</span><span class="va">mySim</span><span class="op">)</span><span class="op">$</span><span class="va">fireSpread</span><span class="op">$</span><span class="va">.plotInitialTime</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="params.html">params</a></span><span class="op">(</span><span class="va">mySim2</span><span class="op">)</span><span class="op">$</span><span class="va">fireSpread</span><span class="op">$</span><span class="va">.plotInitialTime</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="simList-accessors-events.html">events</a></span><span class="op">(</span><span class="va">mySim</span><span class="op">)</span> <span class="co"># load event is at time 1 year</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="simList-accessors-events.html">events</a></span><span class="op">(</span><span class="va">mySim2</span><span class="op">)</span> <span class="co"># load event is at time 1 month, reported in years because of</span></span></span>
<span class="r-in"><span>                <span class="co">#   update to times above</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alex M Chubaty, Eliot J B McIntire.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

